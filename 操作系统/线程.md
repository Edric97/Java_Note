# 线程

## 一、线程概述

### 1、什么是线程

——是一个基本的CPU执行单元，也是程序执行流的最小单位。

（引入线程后，进程只作为除CPU之外的系统资源的分配单元）

### 2、引入线程后的变化

```markdown
1、资源分配、调度 ——》分工更加明确
2、并发性 ——》 提高了并发度（因为传统上只能进程之间并发，现在线程也能并发，粒度更小）
3、系统开销 ——》减轻了系统开销，因为现在不需要切换进程环境
```

### 3、线程的属性

线程的属性有很多，在这里写一点自己容易混淆的点：

```markdown
1、几乎不拥有系统资源（因为资源分配是进程干的事，线程只管在CPU里面跑就完了）
2、由于共享内存地址空间，同一进程中的线程间通信甚至无需系统干预
```

## 二、线程的实现方式

```markdown
1、用户级线程（用户看到的是多线程，实际上操作系统内核意识不到线程的存在，在用户态下即可完成）
2、内核级线程（内核级线程的管理工作由操作系统内核完成，在核心态下才可完成）
		ps：只有内核级线程才是处理机分配的单位
```

## 三、多线程模型

### 1、多对一模型

——多个用户级线程映射到一个内核级线程

优点：用户级线程的切换在用户空间即可完成，不需要切换到核心态，线程管理的系统开销小，效率高

缺点：当一个用户级线程被阻塞后，整个进程都会被阻塞，并发度不高。多个线程不可在多核处理机上并发运行

### 2、一对一模型

可以认为就是内核级线程

优点：并发能力强

缺点：系统开销大

### 3、多对多模型

n个用户级线程映射到m个内核级线程上（其中 n >= m）