macOS10.13.6安装maven出现的问题
===============================

在安装maven3.3.9的时候，按照如下步骤进行操作：

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ markdown
1、打开终端，键入命令 vi ~/.bash_profile 
2、键入 i 进入编辑模式
3、键入命令 （这里maven文件，可以放在任意文件夹下）
        export MAVEN_HOME=/Users/caoxiaodong/apache-maven-3.3.9
        export PATH=$PATH:$MAVEN_HOME/bin
4、然后键入 esc 推出编辑模式，再键入命令 :wq （注意这里的冒号不能省略）保存并退出vim
5、再后，键入命令 source ~/.bash_profile
6、键入命令 mvn -v 查看是否配置成功
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

但是这个时候，并没有出现maven的版本号，而是提醒

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ markdown
JAVA_HOME is not defined correctly.
We cannot execute /Library/Java/JavaVirtualMachines/jdk1.8.0_212.jdk/Contents/Home/bin/java
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

于是键入命令`java
-version`，发现此时的java版本为1.8.0_251，与JAVA_HOME的Java版本号不一致。

因此终端：

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1、vi ~/.bash_profile
2、键入 i 进入编辑模式
3、键入命令 
        export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home
        export PATH=$PATH:$JAVA_HOME/bin
4、键入 esc 推出编辑模式，再键入命令 :wq 保存并退出vim
5、再后，键入命令 source ~/.bash_profile
6、键入命令  echo $JAVA_HOME
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

此时显示

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ markdown
/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

但是实际上，这个时候并没有解决。将该终端窗口关闭之后，再重新键入

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mvn -v
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

发现还是会出现JAVA_HOME错误的情况，通过查阅资料得到，前面修改的JAVA_HOME只是单次有效。要想全局有效，还需要以下步骤：

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1、使用超级管理员权限，Linux下使用的su，但是macOS上，用的是sudo su （第一次登录会要求修改密码）
2、chmod 773 /etc/profile 修改文件操作权限
3、vim /etc/profile
4、将Classpath的内容删除（笔者试过几次，这个不删除，后面会报错）。
5、将PATH 和 JAVA_HOME 的内容修改为：
        export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home
        export PATH=$PATH:$JAVA_HOME/bin
6、保存并退出vim编辑器
7、source /etc/profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

往后不管是否开辟新窗口，输入

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mvn -v
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

都会得到想要的结果。

 

但是这个时候，输入

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
echo $JAVA_HOME
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

会显示为空。

 

先在终端键入

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/libexec/java_home
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

然后将此路径配置一下：

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1、vi ~/.bash_profile
2、JAVA_HOME=`/usr/libexec/java_home`
3、export JAVA_HOME
4、保存退出
5、source  ~/.bash_profile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

这个时候，问题已经全部解决！
